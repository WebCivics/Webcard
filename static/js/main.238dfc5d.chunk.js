(this.webpackJsonpwebcard=this.webpackJsonpwebcard||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n.n(a),o=n(30),r=n.n(o),l=(n(35),n(36),n(0));var c=function(e){let{onDomainSubmit:t}=e;const[n,s]=Object(a.useState)("");return Object(l.jsxs)("div",{className:"w-full max-w-md text-center",children:[Object(l.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"WebCard Viewer"}),Object(l.jsx)("p",{className:"text-gray-400 mb-6",children:"Enter a domain to look up its Agent Discovery Protocol (ADP) record."}),Object(l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&t(n)},className:"flex flex-col sm:flex-row gap-2",children:[Object(l.jsx)("label",{htmlFor:"domain-input",className:"sr-only",children:"Domain Name"}),Object(l.jsx)("input",{id:"domain-input",type:"text",value:n,onChange:e=>s(e.target.value),placeholder:"sailingdigital.com",className:"flex-grow bg-gray-800 border border-gray-700 rounded-md px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),Object(l.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"Look Up"})]})]})},i=n(22);var d=function(e){var t;let{domain:n,onReset:s}=e;const[o,r]=Object(a.useState)(null),[c,d]=Object(a.useState)(!0),[u,m]=Object(a.useState)(null),[b,h]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{const e=new URLSearchParams(window.location.search);h(e.has("ecash"));(async()=>{d(!0),m(null),r(null);try{var e,t;const a=await fetch(`https://cloudflare-dns.com/dns-query?name=_adp.${n}&type=TXT`,{headers:{accept:"application/dns-json"}});if(!a.ok)throw new Error("DNS query failed. Check the domain and network connection.");const s=null===(e=(await a.json()).Answer)||void 0===e||null===(t=e.find(e=>16===e.type))||void 0===t?void 0:t.data.replace(/"/g,"");if(!s)throw new Error(`No ADP TXT record found for ${n}.`);const o=s.match(/ipfs=([a-zA-Z0-9]+)/);if(!o||!o[1])throw new Error("Could not find a valid IPFS CID in the TXT record.");const l=o[1],c=await fetch(`https://ipfs.io/ipfs/${l}`);if(!c.ok)throw new Error("Failed to fetch data from IPFS gateway.");const d=await c.text(),u=new i.a.Parser,m=[];await new Promise((e,t)=>{u.parse(d,(n,a)=>{if(n)return t(new Error(`RDF Parsing Error: ${n.message}`));if(a)m.push(a);else{var s,o,l;const t=new i.a.Store(m),n="http://xmlns.com/foaf/0.1/",a="https://webcivics.github.io/adp/ontdev/adp#",c={hasTwitterAccount:{name:"Twitter",url:"https://twitter.com/"},hasLinkedinAccount:{name:"LinkedIn",url:"https://www.linkedin.com/in/"},hasGithubAccount:{name:"GitHub",url:"https://github.com/"}},d=null===(s=t.getObjects(null,`${n}name`,null)[0])||void 0===s?void 0:s.value,u=null===(o=t.getObjects(null,`${n}img`,null)[0])||void 0===o?void 0:o.id,b=null===(l=t.getObjects(null,`${a}hasEcashAccount`,null)[0])||void 0===l?void 0:l.value,h=[];for(const e in c){const n=t.getObjects(null,`${a}${e}`,null)[0];n&&h.push({name:c[e].name,url:`${c[e].url}${n.value}`})}const j=t.getObjects(null,`${n}page`,null).map(e=>({name:(()=>{try{return new URL(e.id).hostname}catch{return e.id}})(),url:e.id}));r({name:d,img:u,eCashAddress:b,links:[...h,...j]}),e()}})})}catch(a){m(a.message)}finally{d(!1)}})()},[n]),c?Object(l.jsxs)("div",{className:"text-center",children:[Object(l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),Object(l.jsxs)("p",{children:["Fetching profile for ",Object(l.jsx)("span",{className:"font-bold",children:n}),"..."]})]}):u?Object(l.jsxs)("div",{className:"bg-red-900 border border-red-500 text-red-200 px-4 py-3 rounded-md w-full max-w-lg text-center",children:[Object(l.jsx)("h2",{className:"font-bold text-lg mb-2",children:"Error"}),Object(l.jsx)("p",{children:u}),Object(l.jsx)("button",{onClick:s,className:"inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md mt-4 transition-colors",children:"Try Again"})]}):o?b?Object(l.jsx)("pre",{className:"bg-gray-800 p-4 rounded-md w-full max-w-lg whitespace-pre-wrap break-all text-left",children:JSON.stringify({eCashAddress:o.eCashAddress||null},null,2)}):Object(l.jsxs)("div",{className:"bg-gray-800 shadow-lg rounded-lg p-6 w-full max-w-md text-center animate-fade-in",children:[o.img&&Object(l.jsx)("img",{src:o.img,alt:o.name,className:"w-24 h-24 rounded-full mx-auto mb-4 border-4 border-gray-700 object-cover"}),Object(l.jsx)("h1",{className:"text-2xl font-bold",children:o.name||"No Name Found"}),Object(l.jsx)("div",{className:"mt-6 w-full flex flex-col gap-4",children:null===(t=o.links)||void 0===t?void 0:t.map((e,t)=>Object(l.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-md transition-colors w-full",children:e.name},t))}),o.eCashAddress&&Object(l.jsx)("div",{className:"mt-6",children:Object(l.jsxs)("p",{className:"text-gray-400",children:["eCash Address: ",o.eCashAddress]})})]}):Object(l.jsx)("div",{className:"text-center",children:Object(l.jsx)("p",{children:"Could not load profile data."})})};var u=function(){const[e,t]=Object(a.useState)("");return Object(a.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("domain");e&&t(e)},[]),Object(l.jsxs)("div",{className:"bg-gray-900 min-h-screen flex flex-col items-center justify-center text-white font-sans p-4",children:[e?Object(l.jsx)(d,{domain:e,onReset:()=>{const e=window.location.pathname;window.location.href=e}}):Object(l.jsx)(c,{onDomainSubmit:e=>{const t=`${window.location.pathname}?domain=${encodeURIComponent(e)}`;window.location.href=t}}),Object(l.jsx)("footer",{className:"absolute bottom-4 text-gray-500 text-sm",children:"Built with the assistance of an AI assistant."})]})};var m=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then(t=>{let{getCLS:n,getFID:a,getFCP:s,getLCP:o,getTTFB:r}=t;n(e),a(e),s(e),o(e),r(e)})};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(u,{})}),document.getElementById("root")),m()}},[[47,1,2]]]);
//# sourceMappingURL=main.238dfc5d.chunk.js.map